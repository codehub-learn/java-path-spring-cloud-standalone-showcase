server:
  port: 8080

spring:
  application:
    name: restaurant-system-api-gateway

  cloud:
    gateway:
      server:
        webflux:
          discovery:
            locator:
              enabled: true
              lower-case-service-id: true
          # Static routes (no discovery locator magic yet)
          routes:
            - id: restaurant-monolith
              uri: lb://RESTAURANT-SYSTEM-SERVICES-MONOLITH
              predicates:
                # Whatever paths your monolith exposes.
                # If controllers are on /api/**, just proxy them as-is:
                - Path=/api/reservations/**,/api/customers/**
                - Method=GET,POST,PUT,DELETE
            - id: notification-monolith
              uri: lb://NOTIFICATION-SERVICE
              predicates:
                # Whatever paths your monolith exposes.
                # If controllers are on /api/**, just proxy them as-is:
                - Path=/api/notifications/**
                - Method=GET,POST,PUT,DELETE
A          globalcors:
  cors-configurations:
    '[/**]':
      allowed-origins:
        - http://localhost:4200
        - http://localhost:3000
      allowed-methods:
        - GET
        - POST
        - PUT
        - DELETE
      allowed-headers: "*"
      allow-credentials: true
  main:
    banner-mode: off

management:
  endpoints:
    web:
      exposure:
        include: gateway,health,info,metrics
  endpoint:
    health:
      show-details: always

eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
    # How often to pull the registry from Eureka
    registry-fetch-interval-seconds: 30
    refresh:
      enable: false
    service-url:
      defaultZone: http://localhost:8761/eureka/
  instance:
    prefer-ip-address: false
    hostname: localhost
    # Expiration > 2 Ã— Renewal
    # How often this instance sends a heartbeat to Eureka
    lease-renewal-interval-in-seconds: 30
    # How long Eureka waits without heartbeats before evicting
    lease-expiration-duration-in-seconds: 90
    # Optional but nice: more unique instance IDs in dashboards/logs
    instance-id: ${spring.application.name}:${server.port}:${random.uuid}
    metadata-map:
      version: v0.0.1
      environment: dev